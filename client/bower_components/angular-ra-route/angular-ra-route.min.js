"use strict";angular.module("ra.route",["ra.route.directives","ra.route.services"]),angular.module("ra.route.directives",[]).directive("route",["$parse","Route",function(a,b){return{restrict:"A",priority:99,link:function(a,c,d){function e(b){if(b){var c={};b.indexOf(",")>-1?(b=b.split(","),g=b[0].trim(),c=b[1].trim(),b[2]&&(h="true"===b[2].trim()),a.$watch(c,f,!0)):(g=b,f())}}function f(a){var c=b.get(g,a,h);d.$set("href",c)}var g,h;d.$observe("route",e)}}}]),function(){var a=[];angular.version.minor>0&&a.push("ngRoute"),angular.module("ra.route.services",a).provider("Route",["$routeProvider",function(a){function b(a,b,c){h[a]={key:a,path:b,opts:c}}function c(a){var b="",c=a.split("-");return angular.forEach(c,function(a){b=b+a.charAt(0).toUpperCase()+a.slice(1)}),b}function d(a,b){if(b.templateUrl)return b.templateUrl;var c;if(a.indexOf(".")>0){var d=a.split(".");a=d.pop(),c=d.join(".")}return i.templateUrl(b.templateName||a,b.templateBase||c,b)}function e(c,e,f){f.templateUrl=d(c,f),b(c,e,f),a.when(e,f)}function f(a,b){if(!a||!b)return!1;var c,d=a.split("/"),e=b.split("/"),f=!0;return d.length!==e.length?!1:(angular.forEach(d,function(a){return c=e.shift(),a!==c&&":"!==a.charAt(0)?(f=!1,!1):void 0}),f)}var g={},h={},i={templateUrl:function(a,b){var c=[];return b&&c.push(b),a&&c.push(a+".html"),"/"+c.join("/")}};return{config:function(a){angular.extend(i,a)},base:function(a,d,f){return f=f||{},f.controller||(f.controller=c(a)),b(a,d,f,!0),angular.extend({},this,{when:function(b,c,g){return b=a+"."+b,c=d+(c||""),g=angular.extend({},f,g),e(b,c,g),this}})},when:function(a,b,c){return c=c||{},g&&(g=void 0),e(a,b,c),this},redirect:function(b,c){return a.when(b,{redirectTo:c}),this},otherwise:function(b){return a.otherwise(b),this},$get:["$window","$location","$rootScope","$route",function(a,b,c,d){var e=function(a){var b=d.routes[a];return b&&b.keys},g=function(a,b){var c=e(a);if(!c||!b)return a;if(b===!0&&(b={}),!angular.isObject(b)){var d=c[0];a=a.replace(":"+d.name,b),b={}}return angular.isObject(b)&&angular.forEach(c,function(c){if(b[c.name]){var d=":"+c.name;c.optional&&(d+="?"),a=a.replace(d,b[c.name])}else c.optional&&(a=a.replace("/:"+c.name+"?",""))}),a},i=function(a,b){var c=e(a),d=angular.copy(b);return angular.forEach(c,function(a){d[a.name]&&delete d[a.name]}),d},j=function(a,b){var c=[];return angular.forEach(a,function(a,b){(angular.isString(a)||angular.isNumber(a)||"boolean"==typeof a)&&c.push(encodeURIComponent(b)+"="+encodeURIComponent(a))}),(b?"?":"")+c.join("&")};return{defined:function(a){return!!this.definition(a)},definition:function(a){return h&&h[a]},raw:function(a){var b=this.definition(a);return b&&b.path},get:function(a,b,c){var d,e=this.raw(a);return c&&(d=j(i(e,b),!0)),e&&b&&(e=g(e,b)),d&&(e+=d),e},getFull:function(){var a=b.port(),c=b.protocol(),d=[c+"://",b.host()];return("http"===c&&80!==a||"https"===c&&443!==a)&&d.push(":",a),d.push(this.get.apply(this,arguments)),d.join("")},is:function(a,c){return this.get(a,c)===b.path()},matches:function(a){return f(this.raw(a,!0),b.path())},go:function(a,c,d){return b.path(this.get(a,c,d)),this},replace:function(a,c,d){return this.go(a,c,d),b.replace(),this},path:function(){return b.path.apply(b,arguments)},search:function(){return b.search.apply(b,arguments)},redirect:function(b,c){a.location.href=this.get(b,c)},goSearch:function(a,b){return this.go(a,{q:b})}}}]}}])}();